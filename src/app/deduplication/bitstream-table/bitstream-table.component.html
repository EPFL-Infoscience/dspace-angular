<table class="table table-bordered">
  <thead class="bundle-row">
    <tr>
      <th scope="col">
        {{ "Select" | translate }}
      </th>
      <th scope="col">
        {{ "deduplication.merge.table.bitstream.header.title" | translate }}
      </th>
      <th scope="col">
        {{
          "deduplication.merge.table.bitstream.header.identifier" | translate
        }}
      </th>
      <th scope="col">
        {{
          "deduplication.merge.table.bitstream.header.item-identifier"
            | translate
        }}
      </th>
      <th scope="col">
        {{ "CheckSum" | translate }}
      </th>
      <th scope="col">
        {{ "Actions" | translate }}
      </th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let itemObj of itemsToCompare">
      <!-- LOADER -->
      <tr *ngIf="itemObj.object && itemObj.object | dsGetBitstreams | async">
        <ds-loading
          [showMessage]="false"
          *ngIf="!(itemObj.object | dsGetBitstreams | async | async)"
        >
        </ds-loading>
      </tr>
      <!-- NO DATA -->
      <tr
        *ngIf="
          (itemObj.object &&
            (itemObj.object | dsGetBitstreams | async)?.length == 0 &&
            (itemObj.object | dsGetBitstreams | async | async)?.length == 0) ||
            !(itemObj.object | dsGetBitstreams | async | async);
          else data
        "
      >
        <td colspan="12">
          <div class="row justify-content-center">
            No Bitstreams for item with identifier: &nbsp;
            <span [ngStyle]="{ color: itemObj.color }">
              {{ itemObj.object?.uuid }}
            </span>
          </div>
        </td>
      </tr>
      <!--ROW DATA -->
      <ng-template #data>
        <tr
          *ngFor="
            let bitstream of itemObj.object | dsGetBitstreams | async | async
          "
        >
          <td>
            <div class="custom-control custom-checkbox">
              <input
                type="checkbox"
                class="custom-control-input"
                [id]="bitstream.uuid"
                [checked]="bitstreamList.includes(bitstream._links.self.href)"
                (change)="onBitstreamChecked($event, bitstream)"
              />
              <label
                class="custom-control-label"
                [for]="bitstream.uuid"
              ></label>
            </div>
          </td>
          <td>
            <ng-container *ngIf="bitstream.metadata['dc.title']">
              <span *ngFor="let title of bitstream.metadata['dc.title']">
                {{ title.value }} <br />
              </span>
            </ng-container>
          </td>
          <td>{{ bitstream.uuid }}<br /></td>
          <td>
            <span [ngStyle]="{ color: itemObj.color }">
              {{ itemObj.object?.uuid }}
            </span>
          </td>
          <td>
            <span>
              {{ bitstream.checkSum.value }}
            </span>
          </td>
          <td>
            <div class="row justify-content-center">
              <a
                [href]="bitstream?._links?.content?.href"
                class="btn btn-outline-primary btn-sm"
                ngbTooltip="{{
                  'item.edit.bitstreams.edit.buttons.download' | translate
                }}"
              >
                <i class="fas fa-download fa-fw"></i>
              </a>
            </div>
          </td>
        </tr>
      </ng-template>
    </ng-container>
  </tbody>
</table>
