<div class="container">

  <h2>{{'statistics.search.page.header' | translate}}</h2>

  <ng-container *ngIf="searches$ | async; let search">

    <div class="datepicker-container">
      <div class="form-group">
        <div class="input-group">
          <input class="form-control filter-input" placeholder="{{ 'statistics.search.page.startDate' | translate }}"
                  name="dp" [(ngModel)]="dateFrom" (ngModelChange)="onSearchFilterChange()" ngbDatepicker
                  #df="ngbDatepicker" />
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" (click)="df.toggle()" type="button">
              <i class="far fa-calendar-alt"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group ml-2">
          <input class="form-control filter-input" placeholder="{{ 'statistics.search.page.endDate' | translate }}"
                  name="dp" [(ngModel)]="dateTo" (ngModelChange)="onSearchFilterChange()" ngbDatepicker
                  #dt="ngbDatepicker" />

          <div class="input-group-append">
            <button class="btn btn-outline-secondary" (click)="dt.toggle()" type="button">
              <i class="far fa-calendar-alt"></i>
            </button>
          </div>
        </div>
      </div>
      <div class="form-group">
        <div class="input-group ml-2">
          <button class="btn btn-secondary" (click)="resetFilters()" type="button">
            <i class="fas fa-eraser"></i> {{ 'statistics.search.page.reset' | translate }}
          </button>
        </div>
      </div>
    </div>

    <br/>
    <h5>{{'statistics.search.page.total-searches-count' | translate}}: {{search.count}}</h5>
    <br/>

    <h2>{{'statistics.search.page.top-searches.header' | translate}}</h2>

    <div class="table-responsive">
      <table id="searchSteps" class="table table-striped table-hover table-bordered table-sm">
        <thead>
          <tr>
            <th scope="col" class="align-middle text-center"></th>
            <th scope="col" class="align-middle text-center">{{'statistics.search.page.query' | translate}}</th>
            <th scope="col" class="align-middle text-center">{{'statistics.search.page.query.count' | translate}}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let topSearch of search.topSearches | keyvalue: asIsOrder; let i = index">
            <td class="align-middle text-center font-weight-bold">{{ i + 1 }}</td>
            <td class="align-middle text-center">{{topSearch.key}}</td>
            <td class="align-middle text-center">{{topSearch.value}}</td>
          </tr>
        </tbody>

      </table>
    </div>
  </ng-container>
</div>
