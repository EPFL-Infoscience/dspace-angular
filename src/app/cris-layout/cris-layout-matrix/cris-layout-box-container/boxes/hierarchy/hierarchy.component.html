<div class="container">
  <span class="font-weight-bold">{{'vocabulary-treeview.header' | translate}}</span>
  <div class="treeview-container">
    <ds-loading *ngIf="loading | async" [showMessage]="false"></ds-loading>
    <span *ngIf="!(loading | async) && dataSource.data.length === 0" class="text-center text-muted mt-4" >
      <span>{{'vocabulary-treeview.search.no-result' | translate}}</span>
    </span>
    <cdk-tree [dataSource]="dataSource" [treeControl]="treeControl" multiTemplateDataRows>
      <!-- Leaf node -->
      <cdk-tree-node *cdkTreeNodeDef="let node" cdkTreeNodePadding class="d-flex">
          <button type="button" class="btn btn-default" cdkTreeNodeToggle>
            <span class="fas fa-angle-right fa-2x invisible" aria-hidden="true"></span>
          </button>
          <button class="btn btn-outline-link btn-sm text-left"
                  [class.text-success]="node.item?.value === selectedItem?.value"
                  [disabled]="!node.item?.selectable"
                  [ngbTooltip]="node.item?.otherInformation?.note"
                  [openDelay]="500"
                  container="body"
                  (click)="onSelect(node.item)">{{node.item.display}}</button>
      </cdk-tree-node>

      <!-- expandable node -->
      <cdk-tree-node *cdkTreeNodeDef="let node; when: hasChildren" cdkTreeNodePadding class="d-flex">
          <button type="button" class="btn btn-default" cdkTreeNodeToggle
                  [attr.aria-label]="'toggle ' + node.name"
                  (click)="loadChildren(node)">
            <span class="fas {{treeControl.isExpanded(node) ? 'fa-angle-down' : 'fa-angle-right'}} fa-2x"
                  aria-hidden="true"></span>
          </button>

          <button class="btn btn-outline-link btn-sm text-left"
                  [class.text-success]="node.item?.value === selectedItem?.value"
                  [disabled]="!node.item?.selectable"
                  [ngbTooltip]="node.item?.otherInformation?.note"
                  [openDelay]="500"
                  container="body"
                  (click)="onSelect(node.item)">{{node.item.display}}</button>
      </cdk-tree-node>

      <cdk-tree-node *cdkTreeNodeDef="let node; when: isLoadMore" cdkTreeNodePadding>
        <button class="btn btn-outline-secondary btn-sm" (click)="loadMore(node.loadMoreParentItem)">
          {{'vocabulary-treeview.load-more' | translate}}...
        </button>
      </cdk-tree-node>

      <cdk-tree-node *cdkTreeNodeDef="let node; when: isLoadMoreRoot">
        <button class="btn btn-outline-secondary btn-sm" (click)="loadMoreRoot(node)">
          {{'vocabulary-treeview.load-more' | translate}}...
        </button>
      </cdk-tree-node>
    </cdk-tree>
  </div>
</div>